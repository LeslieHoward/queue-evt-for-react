"use strict";function _interopDefault(t){return t&&"object"==typeof t&&"default"in t?t.default:t}Object.defineProperty(exports,"__esModule",{value:!0});var React=require("react"),React__default=_interopDefault(React),hoistNonReactStatics=_interopDefault(require("hoist-non-react-statics")),queueEvt=require("queue-evt");function _extends(){return(_extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}function _inheritsLoose(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function _objectWithoutPropertiesLoose(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}var utils={type:function(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()},isNull:function(t){var e;for(e in t)return!1;return!0},notNull:function(t){return!utils.isNull(t)},isArray:function(t){return"array"===utils.type(t)},isFunction:function(t){return"function"===utils.type(t)},uuid:function(){var t=(new Date).getTime(),e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var r=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?r:3&r|8).toString(16)}));return e}},signal=new queueEvt.Signal,connect=function(t){return function(e){var r=function(r){function n(t){var e;return(e=r.call(this,t)||this).sourceRef=e.props.forwardRef||React__default.createRef(),e}_inheritsLoose(n,r);var o=n.prototype;return o.componentDidMount=function(){var e=this;utils.notNull(this.sourceRef.current)&&utils.isArray(t)&&t.forEach((function(t){var r=t.action,n=t.handler;t.token=utils.uuid(),"function"==typeof n&&signal.on(r,n.bind(e.sourceRef.current),{token:t.token})}))},o.componentWillUnmount=function(){utils.isArray(t)&&t.forEach((function(t){var e=t.action,r=t.token;signal.remove(e,r)}))},o.render=function(){var t=this.props,r=(t.forwardRef,_objectWithoutPropertiesLoose(t,["forwardRef"]));return React__default.createElement(e,_extends({},r,{ref:this.sourceRef}))},n}(React.Component),n=hoistNonReactStatics(r,e);return React__default.forwardRef((function(t,e){return React__default.createElement(n,_extends({},t,{forwardRef:e}))}))}},emit=signal.emit;exports.connect=connect,exports.emit=emit;
