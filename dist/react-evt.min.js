!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("react"),require("hoist-non-react-statics"),require("queue-evt")):"function"==typeof define&&define.amd?define(["exports","react","hoist-non-react-statics","queue-evt"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).ReactEvt={},t.React,t.hoistNonReactStatics,t.evt)}(this,(function(t,e,r,n){"use strict";var o="default"in e?e.default:e;function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(){return(i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},u=Object.keys(t);for(n=0;n<u.length;n++)r=u[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(n=0;n<u.length;n++)r=u[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}function l(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=c(t);if(e){var o=c(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return l(this,r)}}r=r&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r;var p={type:function(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()},isNull:function(t){var e;for(e in t)return!1;return!0},notNull:function(t){return!p.isNull(t)},isArray:function(t){return"array"===p.type(t)},isFunction:function(t){return"function"===p.type(t)},uuid:function(){var t=(new Date).getTime(),e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var r=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?r:3&r|8).toString(16)}));return e}},y=new n.Signal,x=y.emit;t.connect=function(t){return function(n){var c=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(h,e);var r,c,l,x=s(h);function h(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h),(e=x.call(this,t)).sourceRef=e.props.forwardRef||o.createRef(),e}return r=h,(c=[{key:"componentDidMount",value:function(){var e=this;p.notNull(this.sourceRef.current)&&p.isArray(t)&&t.forEach((function(t){var r=t.action,n=t.handler;t.token=p.uuid(),"function"==typeof n&&y.on(r,n.bind(e.sourceRef.current),{token:t.token})}))}},{key:"componentWillUnmount",value:function(){p.isArray(t)&&t.forEach((function(t){var e=t.action,r=t.token;y.remove(e,r)}))}},{key:"render",value:function(){var t=this.props,e=(t.forwardRef,a(t,["forwardRef"]));return o.createElement(n,i({},e,{ref:this.sourceRef}))}}])&&u(r.prototype,c),l&&u(r,l),h}(e.Component),l=r(c,n);return o.forwardRef((function(t,e){return o.createElement(l,i({},t,{forwardRef:e}))}))}},t.emit=x,Object.defineProperty(t,"__esModule",{value:!0})}));
