!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("react"),require("hoist-non-react-statics"),require("queue-evt")):"function"==typeof define&&define.amd?define(["exports","react","hoist-non-react-statics","queue-evt"],e):e((t=t||self).ReactEvt={},t.React,t.hoistNonReactStatics,t.evt)}(this,(function(t,e,r,n){"use strict";var o="default"in e?e.default:e;function u(){return(u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}r=r&&r.hasOwnProperty("default")?r.default:r;var i={type:function(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()},isNull:function(t){var e;for(e in t)return!1;return!0},notNull:function(t){return!i.isNull(t)},isArray:function(t){return"array"===i.type(t)},isFunction:function(t){return"function"===i.type(t)},uuid:function(){var t=(new Date).getTime(),e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var r=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?r:3&r|8).toString(16)}));return e}},c=new n.Signal,a=c.emit;t.connect=function(t){return function(n){var a=function(e){var r,a;function f(t){var r;return(r=e.call(this,t)||this).sourceRef=r.props.forwardRef||o.createRef(),r}a=e,(r=f).prototype=Object.create(a.prototype),r.prototype.constructor=r,r.__proto__=a;var s=f.prototype;return s.componentDidMount=function(){var e=this;i.notNull(this.sourceRef.current)&&i.isArray(t)&&t.forEach((function(t){var r=t.action,n=t.handler;t.token=i.uuid(),"function"==typeof n&&c.on(r,n.bind(e.sourceRef.current),{token:t.token})}))},s.componentWillUnmount=function(){i.isArray(t)&&t.forEach((function(t){var e=t.action,r=t.token;c.remove(e,r)}))},s.render=function(){var t=this.props,e=(t.forwardRef,function(t,e){if(null==t)return{};var r,n,o={},u=Object.keys(t);for(n=0;n<u.length;n++)r=u[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,["forwardRef"]));return o.createElement(n,u({},e,{ref:this.sourceRef}))},f}(e.Component),f=r(a,n);return o.forwardRef((function(t,e){return o.createElement(f,u({},t,{forwardRef:e}))}))}},t.emit=a,Object.defineProperty(t,"__esModule",{value:!0})}));
